function slidesCount(e){var t=e.parent().find(".slider-counter"),o=t.find(".slider-curr"),i=t.find(".slider-total");e.on("init reInit breakpoint beforeChange",function(e,t,n,s){var a=parseInt(t.slickGetOption("slidesToShow")),r=parseInt(t.slickGetOption("slidesToScroll")),c=parseInt(s),l=parseInt(t.slideCount),d=Math.ceil(l/a),u="init"==e.type||"reInit"==e.type||"breakpoint"==e.type?0:parseInt(c/r);i.text(1==a?l:d),o.text(u+1)})}function comenthide(){var e=$(".js-coment");e.each(function(){function e(){i>=n?s.css("display","none"):(s.removeAttr("style"),t())}function t(){s.off("click").on("click",function(e){o.attr("style")?(o.css("max-height",""),$(this).toggleText()):(o.css("max-height",n),$(this).toggleText())})}var o=$(this),i=o.height(),n=o.find(".feedback-item-content-inner").height(),s=o.parent().find(".js-list-more");$(window).on("resize",function(){setTimeout(function(){n=o.find(".feedback-item-content-inner").height(),e()},600)}),e()})}function listhide(){var e=$(".js-slidelist");e.each(function(){function e(){n.off("click").on("click",function(e){e.preventDefault(),i.slice(o).fadeToggle(300),$(this).toggleText()})}var t=$(this),o=t.data("items"),i=t.closest(".tabs-cont").find(".js-slidelist-target").find("li"),n=(i.length,t);i.slice(o).slideUp(),e()})}function masktel(){var e=document.querySelectorAll("input[type=tel]"),t=new Inputmask("+375 (99) 999 99 99",{showMaskOnHover:!1});t.mask(e)}function initCustomSelectList(){var e={initClass:"cs-active",f:{}},t=$(".js-select-custom");$.each(t,function(){var t=$(this),o=t.find("button"),i=(o.data("placeholder"),t.find(".select-list"));t.on("reinit",function(){var e=i.find("input:checked");if($(this).hasClass("depends-on")){var t=$(this).closest(".input-item");if(e.length){var n=t.nextAll(".input-item").find(".depends-on");n.removeClass("disabled").find("input").prop("checked",!1),n.trigger("reinit")}else{var n=t.nextAll(".input-item").find(".depends-on");n.addClass("disabled").find("input").prop("checked",!1),n.trigger("reinit")}}e.length?$(this).hasClass("price-total")?(console.log(4,e.siblings(".elem-price").html()),o.children(".btn-text").addClass("active").html(e.siblings(".elem-price").html()).parent().addClass("is-checked")):o.children(".btn-text").addClass("active").text(""+e.siblings("span").text()).parent().addClass("is-checked"):o.children(".btn-text").removeClass("active").text(o.data("placeholder")).parent().removeClass("is-checked"),CheckForSelect($(this).parents("form"))}),o.on("click",function(){return o.parent().toggleClass("active").siblings().removeClass("active"),!1}),t.on("click","label",function(){var e=$(this),i=e.find("input");i.prop("checked",!0),t.trigger("reinit"),o.parent().removeClass("active")}),t.trigger("reinit"),t.addClass(e.initClass),$(document).on("mouseup",function(e){t.is(e.target)||0!==t.has(e.target).length||t.removeClass("active")})})}function aside(){function e(){setTimeout(function(){$(".aside-stick").stick_in_parent({parent:".aside-menu",offset_top:73})},1)}e(),$(window).on("resize",function(){window.matchMedia("(max-width: 735px)").matches?$(".aside-stick").trigger("sticky_kit:detach"):e()})}function updateToSelectMenu(){$(".ui-datepicker-title select").selectmenu({select:function(e){$(this).trigger("change"),updateToSelectMenu()}}),$(".ui-datepicker-title").append($(".ui-selectmenu-menu"))}function datepick(){var e=$(".datepicker");e.each(function(){var e=$(this),t=new Date;e.datepicker({changeMonth:!0,changeYear:!1,dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],monthNamesShort:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dateFormat:"dd.mm.yy",firstDay:1,yearRange:"-0:+1",minDate:t,showOn:"focus",beforeShow:function(){setTimeout(function(){updateToSelectMenu()},0)},onChangeMonthYear:function(){setTimeout(function(){updateToSelectMenu()},0)}}),e.datepicker("refresh")}),$(window).resize(function(){e.datepicker("hide")})}function promoSlider(){$(".js-promoslider").each(function(){var e=$(this),t=e.parent();e.slick({accessibility:!0,arrows:!1,draggable:!1,autoplay:!0,dots:!0,appendDots:t.find(".nav-dots"),touchMove:!1,infinite:!0,slidesToShow:1,slidesToScroll:1,autoplaySpeed:8e3})})}function questionSlider(){$(".js-questionslider").each(function(){var e=$(this);slidesCount(e),e.slick({accessibility:!0,arrows:!0,draggable:!1,dots:!1,touchMove:!0,autoplay:!1,infinite:!1,appendArrows:e.parent().find(".nav-arrows"),slidesToShow:6,slidesToScroll:1,nextArrow:slideArrr,prevArrow:slideArrl,responsive:[{breakpoint:950,settings:{slidesToShow:4,autoplay:!0,autoplaySpeed:5e3,slidesToScroll:2}},{breakpoint:700,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1,centerMode:!0}}]})})}function routefeaturesSlider(){$(".js-routefeatures-slider").each(function(){var e=$(this);slidesCount(e),e.slick({accessibility:!0,arrows:!0,draggable:!1,dots:!1,touchMove:!0,autoplay:!1,infinite:!1,appendArrows:e.parent().find(".nav-arrows"),slidesToShow:6,slidesToScroll:1,nextArrow:slideArrr,prevArrow:slideArrl,responsive:[{breakpoint:1024,settings:{slidesToShow:5,autoplay:!0,autoplaySpeed:5e3,slidesToScroll:2}},{breakpoint:870,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:2}}]})})}function servicesSlider(){$(".js-serviceslider").each(function(){var e=$(this);slidesCount(e),e.slick({accessibility:!0,arrows:!0,draggable:!1,dots:!1,touchMove:!0,autoplay:!1,infinite:!1,appendArrows:e.parent().find(".nav-arrows"),slidesToShow:3,slidesToScroll:1,nextArrow:slideArrr,prevArrow:slideArrl,responsive:[{breakpoint:950,settings:{slidesToShow:2,autoplay:!0,autoplaySpeed:5e3}},{breakpoint:700,settings:{slidesToShow:1}}]})})}function mapMarkerinit(e){function t(){n=new ymaps.Map(e,{center:s,zoom:14,controls:["zoomControl","fullscreenControl"]},{}),gCollection=new ymaps.GeoObjectCollection(null,{}),myPlacemark=new ymaps.Placemark(n.getCenter(),{},{iconLayout:"default#image",iconImageHref:a,iconImageSize:[40,50],iconImageOffset:[-20,-50]}),n.geoObjects.add(myPlacemark),n.behaviors.disable(["rightMouseButtonMagnifier","ruler","scrollZoom"]),n.controls.remove("typeSelector"),n.controls.remove("searchControl"),n.controls.remove("GeolocationControl"),n.container.fitToViewport(),$("#"+e).on("resize",function(){setTimeout(function(){n.container.fitToViewport()},300)});for(var t=i(e),r=t.length,c=0;c<r;c++)gCollection.add(new ymaps.Placemark(t[c]));gCollection.options.set({iconLayout:"default#image",iconImageHref:a,iconImageSize:[24,35],iconImageOffset:[-12,-35]}),o(e)}function o(e){var t=$("#"+e).closest(".tabs-cont").find(".js-marker-add");t.on("click",function(){$(this).hasClass("active")?($(this).removeClass("active"),n.geoObjects.remove(gCollection),n.setBounds(n.geoObjects.getBounds()),n.setZoom(14)):($(this).addClass("active"),n.geoObjects.add(gCollection),n.setBounds(n.geoObjects.getBounds()))})}function i(e){var t=[],o=$("#"+e).closest(".tabs-cont").find("li");o.each(function(){var e=$(this).data("cords");t.push(e)});return t.splice(0,1),t}var n,s=$("#"+e).closest(".tabs-cont").find("li").first().data("cords"),a=$("#"+e).data("imagesrc");ymaps.ready(t)}function mapinit(e){function t(){o=new ymaps.Map(e,{center:i,zoom:14,controls:["zoomControl","fullscreenControl"]},{}),myPlacemark=new ymaps.Placemark(o.getCenter(),{},{iconLayout:"default#image",iconImageHref:"images/myIcon.gif",iconImageHref:"/local/templates/main/img/map.svg",iconImageSize:[30,44],iconImageOffset:[-15,-44]}),o.geoObjects.add(myPlacemark),o.behaviors.disable(["rightMouseButtonMagnifier","ruler","scrollZoom"]),o.controls.remove("typeSelector"),o.controls.remove("searchControl"),o.controls.remove("GeolocationControl")}var o,i=$("#"+e).data("cords");ymaps.ready(t)}function validateForms(){var e=$(".js-validate");e.length&&e.each(function(){var e=$(this);e.parent();$.validate({form:e,modules:"security",borderColorOnError:!0,scrollToTopOnError:!1,onSuccess:function(t){formResponse(e)},onValidate:function(t){CheckForSelect(e),checkStars(e)}})})}function CheckForSelect(e){if(e.find(".select-check").length){var t=e.find(".select-check");t.each(function(){var e=$(this),t=(e.find(".selects"),e.find(".option.has-error"));t.length?e.addClass("error"):e.removeClass("error")}),!t.hasClass("error")}}function popUpsInit(){var e=this;e.b={open:$(".js-popup-button")},e.c={popup:$(".js-popup-container"),body:$("body")},e.f={},e.conf={body_class:"modal_open",active_class:"active",close_selector:".closePopup",initial_class:"popup-initialed"},e.f.initModalActions=function(t){$(t).on("click",".modal-container-content,.modal-container-header",function(t){e.conf.close_selector.is(t.target)||t.stopPropagation()}),t.find(e.conf.close_selector).add(t).off("click.popup").on("click.popup",function(){e.f.closePopup(t)})},e.f.closePopup=function(t){var o=parseInt(e.c.body.css("top")),i=Math.abs(o),n=t.find(".modal-container:not(.response)");_response=t.find(".response"),t.removeClass(e.conf.active_class),e.c.body.removeClass(e.conf.body_class).removeAttr("style"),$(window).scrollTop(i),setTimeout(function(){n.removeAttr("style"),_response.css("display","none")},500)},e.f.openPopup=function(t){var o=e.c.body.scrollTop();0===o&&(o=$("html").scrollTop()),setTimeout(function(){console.log(o,"timeout"),t.addClass(e.conf.active_class),e.c.body.addClass(e.conf.body_class).css("top",-o)},10)},$.each(e.c.popup.not("."+e.conf.initial_class),function(){var t=$(this);e.f.initModalActions(t),t.off("reinit").on("reinit",function(){e.f.initModalActions(t)}),t.addClass(e.conf.initial_class)}),e.b.open.off("click.popup").on("click.popup",function(t){t.preventDefault();var o=$(this),i=e.c.popup.filter('[data-modal="'+o.data("modal")+'"]');return e.f.openPopup(i),!1})}function formResponse(e){if(e.closest(".modal-container").length){var t=e.closest(".modal-container"),o=t.next(".response");o.length&&t.fadeOut("slow",function(){o.fadeIn("slow")})}}function Tabs(){if($(".js-tabs-wrap").length){var e=$(".js-tabs-wrap");e.each(function(){var t=$(this),o=t.find(".js-tab-trigger"),i=t.find(".tabs-body"),n=i.find(".tabs-cont"),s=t.find(o).filter(".active"),a=s.index();s.length?n.hide().eq(a).show():(n.not(":first").hide(),o.first().addClass("active")),o.on("click",function(t){var i=$(this);if(t.preventDefault(),!i.hasClass("active")){i.addClass("active").siblings().removeClass("active");var s=e.find(o).filter(".active");n.hide().eq($(s).index()).fadeIn().find(".map-elem").trigger("resize")}})})}}document.addEventListener("DOMContentLoaded",function(){function e(){var e=$(".js-menu"),t=$(".header-mobile-menu"),i=$(".page__header"),n=$("body"),s="active",a="menu-open";e.add(t).on("click",function(){e.hasClass("anim")||(e.addClass("anim"),o(a),e.add(t).toggleClass(s),n.add(i).toggleClass(a),setTimeout(function(){e.removeClass("anim")},500))}),$(".header-mobile-menu-outer").click(function(e){e.stopPropagation()})}function t(e,t,o){var i=$(e),n=i.closest(t),s=n.find(o);i.each(function(){$(this).on("click",function(){var e=n.find(s);e.hasClass("active")?e.add($(this)).removeClass("active"):(n.siblings().find(s).removeClass("active"),e.add($(this)).addClass("active"))})})}function o(e){var t=$("body");if(t.hasClass(e)){var o=parseInt(t.css("top")),i=Math.abs(o);console.log(i),t.css("top",""),setTimeout(function(){$(window).add(t).scrollTop(i)},10)}else{var o=t.scrollTop();0===o&&(o=$("html").scrollTop()),t.css("top",-o)}}function i(){var e=$(".header-bottom-menu"),t=e.find("li a"),o=e.find(".active");e.parent().append("<div id='slide-line'></div>");var i=$("#slide-line");n(i,".header-bottom-menu-item.active"),t.hover(function(){var e=$(this).find("span"),t=e.position().left,o=e.width();i.stop().animate({left:t,width:o})},function(){0!=o.length?i.stop().animate({left:i.data("origLeft"),width:i.data("origWidth")}):i.stop().animate({width:0})}),$(window).on("resize",function(){setTimeout(function(){n(i,".header-bottom-menu-item.active")},300)})}function n(e,t){e.is(":visible")&&0!=$(t).length&&e.width($(t).find("span").width()).css("left",$(t).find("span").position().left).data("origLeft",e.position().left).data("origWidth",e.width())}!function(){function e(){var e=$(document).scrollTop();t(e),s=e,i=!1}function t(e){e<=20?o.classList.remove("is-hidden"):o.classList.add("is-hidden"),n($("#slide-line"),".header-bottom-menu-item.active")}var o=document.querySelector(".cd-auto-hide-header"),i=(o.offsetHeight,!1),s=0;$(window).on("scroll",function(){i||(i=!0,window.requestAnimationFrame?requestAnimationFrame(e):setTimeout(e,250))})}(),e(),t(".js-dropdown",".js-dropdown-parent",".js-dropdown-target"),i(),$(".js-scroll-to").on("click",function(e){e.preventDefault();var t=$(this).data("href"),o=$("body").find('[data-id="'+t+'"]');if($(".aside-stick").trigger("sticky_kit:recalc"),o.length){var i=$(o).offset().top,n=window.matchMedia("(max-width: 991px)").matches?70:90;$("html, body:not(:animated), .out:not(:animated)").animate({scrollTop:i-n},500),setTimeout(function(){window.location.hash=t},400)}}),aside(),popUpsInit(),validateForms(),masktel(),initCustomSelectList(),comenthide(),datepick(),Tabs(),sortItem(),listhide(),questionSlider(),servicesSlider(),promoSlider(),routefeaturesSlider(),jQuery.fn.toggleText=function(){var e=this.data("alt-text");e&&(this.data("alt-text",this.text()),this.find("span").text(e))}});var slideArrr='<button type="button" class="carousel-next"><svg class="icon icon-drop"><use xlink:href="#slider-arrow" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg></button>',slideArrl='<button type="button" class="carousel-prev"><svg class="icon icon-drop"><use xlink:href="#slider-arrow" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg></button>',sortItem=function(){var e=$(".js-select-item");e.on("click",function(){var t=$(this),o=t.find("span"),i=t.parent().find(".dropdown-target"),n=i.find(".sort-select-item a");t.toggleClass("active"),n.on("click",function(t){var n=$(this),s=n.data("text");o.text(s),n.parent().addClass("active").siblings().removeClass("active"),t.preventDefault(),setTimeout(function(){i.removeClass("active"),e.removeClass("active")},300)}),$(document).on("mouseup",function(t){e.is(t.target)||0!==e.has(t.target).length||e.removeClass("active")})})};